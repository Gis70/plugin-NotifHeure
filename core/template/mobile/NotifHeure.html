

<div class="eqLogic-widget eqLogic " style="width: auto;height: auto;border:#border#;border-radius:#border-radius#;background-color: #background-color#;color: #color#;#style#;" data-eqLogic_id="#id#" data-eqLogic_uid="#uid#" data-version="mobile" >
	<span class="statusCmd" style="position : absolute;left : 5px; width : 30px;z-index: 1030;"></span>
	<i class='fa fa-refresh pull-right cursor refresh cmd' style="margin-top: 3px;margin-right: 3px;"></i>
<span class="cmd cmd-widget" data-cmd_id="#refresh_id#" style="display:none;"></span>
<div style="padding:10px;">
	<center class="widget-name">
  <span style="font-size:1em; position:relative; top:-2px;">#name_display#</span>
  </center>
<div  style="background-color:black;color:red;margin:0 10px;border:1px solid white;">
	<center><span id="statusNotif" style="font-size:1.2em;font-weight: bold;" >#statusNotif#</span></center>
	<center><span id="statusAuto" style="font-size:0.6em;color:#aaaaaa;margin-right:25px;">#LUM#</span><span id="statusInt" style="font-size:0.75em;color:#ffffff;">#INT#</span></center>
</div>
<div class="text-left" style="margin:5px 15px;">Intensité ( Manuel )
<input type="range" value="#INT#" max="15" min="0" step="1" id ="slider#INTcmd_id#" data-type="action" data-subtype="slider" title="Réglase intensité( Manuel )">
</div>
<div>

		<label for="#notif_id#_title" style="color:white;">Options</label>
		<input id="#notif_id#_title" class="form-control" type="text" data-type="action" data-subtype="message" placeholder="Options Notif.">


			<label for="#notif_id#_message">Message</label>
			<textarea  id="#notif_id#_message" class="form-control" data-type="action" data-subtype="message" placeholder="notification" style="height: 60px;"></textarea>
			<div style="margin:5px 0;">
			<button  class="btn cmd " id="btn#notif_id#" style="background-color:#cmd-background-color#;font-size:0.7em;" >Envoyer notification</button>
			</div>
</div>
<div class="cmd noRefresh" id="#HOR_id#" data-type="info" data-subtype="binary" data-cmd_id="#HOR_id#">#HOR#</div>
<div class="cmd noRefresh" id="#SEC_id#" data-type="info" data-subtype="binary" data-cmd_id="#SEC_id#">#SEC#</div>
<div class="cmd noRefresh" id="#LED_id#" data-type="info" data-subtype="binary" data-cmd_id="#LED_id#">#LED#</div>
<hr />
<div style="font-size:1em;">
	<span class="divers-thermometer31 pull-left"></span>
	<span id="#temp_id#" class="cmd  pull-left #temp_history# " data-type="info" data-subtype="numeric" data-cmd_id="#temp_id#" title="#temp_collect#">#temp_text#</span>
</div>

<div style="font-size:1em;">
	<span id="#hum_id#" class="cmd  pull-right #hum_history#" data-type="info" data-subtype="numeric" data-cmd_id="#hum_id#" title="#hum_collect#">#hum_text#</span>
	<span class="fa fa-tint pull-right"></span>
</div>
<div style="clear: both;"></div>
<hr />
<button type="button" data-cmd_id="#horOff_id#" title="Horloge Off" style="width:35px;display: inline;padding: 1px;height: auto;background-color:#cmd-background-color#;" onclick="actBtn('#horOff_id#','#HOR_id#',0);"><i class="fa fa-power-off"></i></button>
<button type="button" data-cmd_id="#horOn_id#" title="Horloge On" style="width:35px;display: inline;padding: 1px;height: auto;background-color:#cmd-background-color#;" onclick="actBtn('#horOn_id#','#HOR_id#',1);"><i class="fa fa-clock-o"></i></button>
<button type="button"  data-cmd_id="#secOn_id#" title="Afficher Secondes" style="width:35px;display: inline;padding: 1px;height: auto;background-color:#cmd-background-color#;" onclick="actBtn('#secOn_id#','#SEC_id#',1);"><i class="fa fa-plus-circle"></i></button>
<button type="button" data-cmd_id="#secOff_id#" title="Masquer Secondes" style="width:35px;display: inline;padding: 1px;height: auto;background-color:#cmd-background-color#;" onclick="actBtn('#secOff_id#','#SEC_id#',0);"><i class="fa fa-minus-circle" ></i></button>
<button type="button" data-cmd_id="#lumOn_id#" title="Mode Auto" style="width:35px;display: inline;padding: 1px;height: auto;background-color:#cmd-background-color#;" onClick="autoMode();"><i class="fas fa-magic"></i></button>
<center>
<button id="btnled" type="button"  data-cmd_id="#ledOn_id#" title="LED ON" style="width:35px;display: inline;padding: 1px;height: auto;background-color:#cmd-background-color#;" onclick="jeedom.cmd.execute({id:'#ledOn_id#'});"><i class="far fa-lightbulb"></i></button>
<button id="btnled" type="button"  data-cmd_id="#ledOff_id#" title="LED OFF" style="width:35px;display: inline;padding: 1px;height: auto;background-color:#cmd-background-color#;" onclick="jeedom.cmd.execute({id:'#ledOff_id#'});"><i class="fas fa-lightbulb"></i></button>
</center>
<br />
<script>
	sn = $('#statusNotif').text();
	am = $('#statusAuto').text();
	$("##HOR_id#").hide();
	$("##SEC_id#").hide();
	$("##LED_id#").hide();
	$('#btn#notif_id#').on('click', function() {
		jeedom.cmd.execute({
			id: '#notif_id#',
			value: {
				'message': $('##notif_id#_message').val(),
				'title': $('##notif_id#_title').val()
			}
		});
	});

	function refreshSn() {
		if (sn == "0") $('#statusNotif').text("OFF");
		else if (sn == "1") $('#statusNotif').text("20:12:58");
		else if (sn == "2") $('#statusNotif').text("20:12");
	}

	function refreshAm() {
		if (am == "1") $('#statusAuto').text("Mode Automatique");
		else $('#statusAuto').text("Mode Manuel");
	}

	function adjSn() {
		sn = 1;
		if ($('##SEC_id#').html() == "0") sn = 2;
		if ($('##HOR_id#').html() == "0") sn = 0;
		refreshSn();
	}

	function actBtn(idBtn, idState, val) {
		console.log("valeur : " + idBtn + " id2 :" + idState + " val :" + val);
		jeedom.cmd.execute({
			id: idBtn
		});
		$("#" + idState).html(val);
		adjSn();
	}

	function autoMode() {
		jeedom.cmd.execute({
			id: '#lumOn_id#'
		});
		am = "1";
		refreshAm();
	}

	$('#slider#INTcmd_id#').on("change", function(e) {
		lum = $(this).val();
		//console.log("valeur de intensité : "+lum);
		jeedom.cmd.execute({
			id: '#INTcmd_id#',
			value: {
				'slider': lum
			}
		});
		$('#statusInt').text(lum);
		am = "0";
		refreshAm();
	})


	$('.eqLogic[data-eqLogic_uid=#uid#] .refresh').on('click', function() {
		jeedom.cmd.execute({
			id: '#refresh_id#'
		});
	});


	$(function() {
	    console.log( "ready!" );
			refreshSn();
			refreshAm();
			$("head").append('<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">');
	});



</script>
</div>
</div>
